import{J as a,K as e,L as l,O as s,r as t,m as i,z as u,A as n,c,a as r,w as d,n as o,h as f,o as _,b as v,d as k,t as g,e as p,f as m,g as b,F as h,v as w,M as y,i as x,j as C,S as F}from"./index-fpvSXMFF.js";import{R as S}from"./rich-text-parser.DWhg5pkf.js";import{s as z}from"./md5.1MjfM345.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";const A=(s=>(t,i=l())=>{!a&&e(s,t,i)})(s),M=N({__name:"plugin-detail",setup(a){const e=t(!1),l=t(!0),s=t({}),N=t(!1);A((a=>{try{const t=i("theme");t&&(e.value="dark"===t),a.plugin?(s.value=JSON.parse(decodeURIComponent(a.plugin)),console.log("=== æ’ä»¶è¯¦æƒ…é¡µ - å½“å‰æ’ä»¶æ•°æ®ç»“æ„ ==="),console.log("æ’ä»¶åç§°:",s.value.shortname||s.value.name),console.log("å®Œæ•´æ•°æ®:",JSON.stringify(s.value,null,2)),console.log("======================================="),l.value=!1):(u({title:"æ’ä»¶æ•°æ®é”™è¯¯",icon:"error",duration:2e3}),setTimeout((()=>{n()}),2e3))}catch(t){console.error("åŠ è½½æ’ä»¶è¯¦æƒ…å¤±è´¥:",t),u({title:"åŠ è½½å¤±è´¥",icon:"error",duration:2e3}),setTimeout((()=>{n()}),2e3)}}));const M=()=>{n()},j=()=>{e.value=!e.value,w("theme",e.value?"dark":"light")},q=c((()=>{var a,e,l,t,i,u;if(N.value)return null;const n=s.value;if(null==(l=null==(e=null==(a=n._raw)?void 0:a.package)?void 0:e.publisher)?void 0:l.email)return n._raw.package.publisher.email;if((null==(u=null==(i=null==(t=n._raw)?void 0:t.package)?void 0:i.maintainers)?void 0:u.length)>0){const a=n._raw.package.maintainers[0].email;if(a)return a}return null})),B=a=>{if(!a)return"";return`https://www.gravatar.com/avatar/${z(a.toLowerCase().trim())}?d=identicon&s=96`},J=()=>{N.value=!0},K=a=>{(!a||a<0)&&(a=0),a>5&&(a=5);const e=Math.floor(a),l=a%1>=.5,s=5-Math.ceil(a);let t="â˜…".repeat(e);return l&&(t+="â˜†"),s>0&&(t+="â˜†".repeat(s)),t},O=a=>a?a>=1048576?(a/1048576).toFixed(1)+" MB":a>=1024?(a/1024).toFixed(1)+" KB":a+" B":"0 B",D=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),L=a=>{y({data:a,success:()=>{u({title:"é“¾æ¥å·²å¤åˆ¶",icon:"success",duration:1500})}})};return(a,t)=>{const i=x,u=f,n=C,c=F;return _(),r(u,{class:o(["plugin-detail-page",{"dark-mode":e.value}])},{default:d((()=>[v(u,{class:"detail-header"},{default:d((()=>[v(u,{class:"back-btn",onClick:M},{default:d((()=>[v(i,{class:"back-icon"},{default:d((()=>[k("â†")])),_:1}),v(i,{class:"back-text"},{default:d((()=>[k("è¿”å›")])),_:1})])),_:1}),v(u,{class:"header-title"},{default:d((()=>[k("æ’ä»¶è¯¦æƒ…")])),_:1}),v(u,{class:"theme-toggle",onClick:j},{default:d((()=>[v(i,{class:"theme-icon"},{default:d((()=>[k(g(e.value?"â˜€ï¸":"ğŸŒ™"),1)])),_:1})])),_:1})])),_:1}),l.value?(_(),r(u,{key:0,class:"loading-container"},{default:d((()=>[v(u,{class:"loading-spinner"}),v(i,{class:"loading-text"},{default:d((()=>[k("åŠ è½½ä¸­...")])),_:1})])),_:1})):(_(),r(c,{key:1,class:"detail-content","scroll-y":""},{default:d((()=>[v(u,{class:"content-wrapper"},{default:d((()=>{var a,e,l,c,o,f,w,y,x,C,F,z;return[v(u,{class:"plugin-header"},{default:d((()=>[v(u,{class:"plugin-icon"},{default:d((()=>[q.value?(_(),r(n,{key:0,class:"author-avatar",src:B(q.value),mode:"aspectFill",onError:J},null,8,["src"])):(_(),r(u,{key:1,class:"icon-fallback"},{default:d((()=>[v(i,{class:"icon-text"},{default:d((()=>{return[k(g((a=s.value.category,{adapter:"ğŸ”Œ",extension:"ğŸ§©",tool:"ğŸ”§",game:"ğŸ®",image:"ğŸ–¼ï¸",manage:"âš™ï¸",general:"ğŸ“¦",webui:"ğŸŒ",other:"ğŸ“‹"}[a]||"ğŸ“¦")),1)];var a})),_:1})])),_:1}))])),_:1}),v(u,{class:"plugin-basic-info"},{default:d((()=>[v(u,{class:"plugin-name"},{default:d((()=>[k(g(s.value.shortname||s.value.name),1)])),_:1}),v(u,{class:"plugin-package"},{default:d((()=>{var a,e;return[k("@"+g((null==(e=null==(a=s.value._raw)?void 0:a.package)?void 0:e.name)||s.value.name),1)]})),_:1}),s.value.author?(_(),r(u,{key:0,class:"plugin-author"},{default:d((()=>[v(i,{class:"author-icon"},{default:d((()=>[k("ğŸ‘¤")])),_:1}),v(i,null,{default:d((()=>[k(g(s.value.author),1)])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1}),v(u,{class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ“ æè¿°")])),_:1}),v(u,{class:"section-content"},{default:d((()=>{var a,e,l;return[v(S,{class:"description-text",text:(l=s.value.description||(null==(e=null==(a=s.value._raw)?void 0:a.manifest)?void 0:e.description),"object"==typeof l?l["zh-CN"]||l.zh||l.en||JSON.stringify(l):l||"æš‚æ— æè¿°"),"parse-images":!0,"parse-links":!0},null,8,["text"])]})),_:1})])),_:1}),v(u,{class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ·ï¸ ç‰ˆæœ¬ä¿¡æ¯")])),_:1}),v(u,{class:"info-grid"},{default:d((()=>{var a,e;return[v(u,{class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("å½“å‰ç‰ˆæœ¬")])),_:1}),v(i,{class:"info-value"},{default:d((()=>[k(g(s.value.version||"N/A"),1)])),_:1})])),_:1}),(null==(e=null==(a=s.value.package)?void 0:a.peerDependencies)?void 0:e.koishi)?(_(),r(u,{key:0,class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("Koishi ç‰ˆæœ¬")])),_:1}),v(i,{class:"info-value"},{default:d((()=>[k(g(s.value.package.peerDependencies.koishi),1)])),_:1})])),_:1})):p("",!0)]})),_:1})])),_:1}),v(u,{class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ“Š ç»Ÿè®¡ä¿¡æ¯")])),_:1}),v(u,{class:"info-grid"},{default:d((()=>{var a;return[v(u,{class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("ä¸‹è½½é‡")])),_:1}),v(i,{class:"info-value"},{default:d((()=>{var a,e,l;return[k(g((l=s.value.downloads||(null==(e=null==(a=s.value._raw)?void 0:a.downloads)?void 0:e.lastMonth),l?l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toString():"0"))+"/æœˆ",1)]})),_:1})])),_:1}),v(u,{class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("è¯„åˆ†")])),_:1}),v(u,{class:"rating-value"},{default:d((()=>[v(i,{class:"stars"},{default:d((()=>[k(g(K(s.value.rating)),1)])),_:1}),v(i,{class:"rating-number"},{default:d((()=>{var a;return[k(g((null==(a=s.value.rating)?void 0:a.toFixed(1))||"0.0"),1)]})),_:1})])),_:1})])),_:1}),v(u,{class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("å®‰è£…å¤§å°")])),_:1}),v(i,{class:"info-value"},{default:d((()=>{var a;return[k(g(O(s.value.installSize||(null==(a=s.value._raw)?void 0:a.installSize))),1)]})),_:1})])),_:1}),v(u,{class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("å‘å¸ƒå¤§å°")])),_:1}),v(i,{class:"info-value"},{default:d((()=>{var a;return[k(g(O(s.value.publishSize||(null==(a=s.value._raw)?void 0:a.publishSize))),1)]})),_:1})])),_:1}),v(u,{class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("ä¾èµ–æ•°")])),_:1}),v(i,{class:"info-value"},{default:d((()=>{var a;return[k(g(s.value.dependents||(null==(a=s.value._raw)?void 0:a.dependents)||0),1)]})),_:1})])),_:1}),(null==(a=s.value._raw)?void 0:a.score)?(_(),r(u,{key:0,class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("è´¨é‡è¯„åˆ†")])),_:1}),v(i,{class:"info-value"},{default:d((()=>{var a;return[k(g((null==(a=s.value._raw.score.quality)?void 0:a.toFixed(1))||"N/A"),1)]})),_:1})])),_:1})):p("",!0)]})),_:1})])),_:1}),s.value.insecure||s.value.verified||s.value.portable?(_(),r(u,{key:0,class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ–ï¸ å¾½ç« ")])),_:1}),v(u,{class:"badges-container"},{default:d((()=>[s.value.verified?(_(),r(u,{key:0,class:"badge verified"},{default:d((()=>[v(i,{class:"badge-icon"},{default:d((()=>[k("âœ“")])),_:1}),v(i,{class:"badge-text"},{default:d((()=>[k("å®˜æ–¹è®¤è¯")])),_:1})])),_:1})):p("",!0),s.value.portable?(_(),r(u,{key:1,class:"badge portable"},{default:d((()=>[v(i,{class:"badge-icon"},{default:d((()=>[k("ğŸ“±")])),_:1}),v(i,{class:"badge-text"},{default:d((()=>[k("å¯ç§»æ¤")])),_:1})])),_:1})):p("",!0),s.value.insecure?(_(),r(u,{key:2,class:"badge insecure"},{default:d((()=>[v(i,{class:"badge-icon"},{default:d((()=>[k("âš ï¸")])),_:1}),v(i,{class:"badge-text"},{default:d((()=>[k("ä¸å®‰å…¨")])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})):p("",!0),(null==(e=null==(a=s.value._raw)?void 0:a.package)?void 0:e.publisher)?(_(),r(u,{key:1,class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ‘¤ å‘å¸ƒè€…")])),_:1}),v(u,{class:"publisher-card"},{default:d((()=>[v(n,{class:"publisher-avatar",src:B(s.value._raw.package.publisher.email),mode:"aspectFill"},null,8,["src"]),v(u,{class:"publisher-info"},{default:d((()=>[v(i,{class:"publisher-name"},{default:d((()=>[k(g(s.value._raw.package.publisher.username),1)])),_:1}),v(i,{class:"publisher-email"},{default:d((()=>[k(g(s.value._raw.package.publisher.email),1)])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0),(null==(o=null==(c=null==(l=s.value._raw)?void 0:l.package)?void 0:c.maintainers)?void 0:o.length)?(_(),r(u,{key:2,class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ› ï¸ ç»´æŠ¤è€… ("+g(s.value._raw.package.maintainers.length)+")",1)])),_:1}),v(u,{class:"maintainers-list"},{default:d((()=>[(_(!0),m(h,null,b(s.value._raw.package.maintainers,((a,e)=>(_(),r(u,{class:"maintainer-card",key:e},{default:d((()=>[v(n,{class:"maintainer-avatar",src:B(a.email),mode:"aspectFill"},null,8,["src"]),v(u,{class:"maintainer-info"},{default:d((()=>[v(i,{class:"maintainer-name"},{default:d((()=>[k(g(a.username),1)])),_:2},1024),v(i,{class:"maintainer-email"},{default:d((()=>[k(g(a.email),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0),(null==(w=null==(f=s.value._raw)?void 0:f.manifest)?void 0:w.service)?(_(),r(u,{key:3,class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("âš™ï¸ æœåŠ¡")])),_:1}),v(u,{class:"service-info"},{default:d((()=>{var a,e,l;return[(null==(a=s.value._raw.manifest.service.implements)?void 0:a.length)?(_(),r(u,{key:0,class:"service-item"},{default:d((()=>[v(i,{class:"service-label"},{default:d((()=>[k("å®ç°ï¼š")])),_:1}),v(u,{class:"service-tags"},{default:d((()=>[(_(!0),m(h,null,b(s.value._raw.manifest.service.implements,((a,e)=>(_(),r(i,{class:"service-tag",key:e},{default:d((()=>[k(g(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0),(null==(e=s.value._raw.manifest.service.required)?void 0:e.length)?(_(),r(u,{key:1,class:"service-item"},{default:d((()=>[v(i,{class:"service-label"},{default:d((()=>[k("ä¾èµ–ï¼š")])),_:1}),v(u,{class:"service-tags"},{default:d((()=>[(_(!0),m(h,null,b(s.value._raw.manifest.service.required,((a,e)=>(_(),r(i,{class:"service-tag required",key:e},{default:d((()=>[k(g(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0),(null==(l=s.value._raw.manifest.service.optional)?void 0:l.length)?(_(),r(u,{key:2,class:"service-item"},{default:d((()=>[v(i,{class:"service-label"},{default:d((()=>[k("å¯é€‰ï¼š")])),_:1}),v(u,{class:"service-tags"},{default:d((()=>[(_(!0),m(h,null,b(s.value._raw.manifest.service.optional,((a,e)=>(_(),r(i,{class:"service-tag optional",key:e},{default:d((()=>[k(g(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0)]})),_:1})])),_:1})):p("",!0),(null==(C=null==(x=null==(y=s.value._raw)?void 0:y.package)?void 0:x.keywords)?void 0:C.length)?(_(),r(u,{key:4,class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ”– å…³é”®è¯")])),_:1}),v(u,{class:"keywords-container"},{default:d((()=>[(_(!0),m(h,null,b(s.value._raw.package.keywords,((a,e)=>(_(),r(u,{class:"keyword-tag",key:e},{default:d((()=>[k(g(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0),(null==(z=null==(F=s.value._raw)?void 0:F.package)?void 0:z.links)?(_(),r(u,{key:5,class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("ğŸ”— ç›¸å…³é“¾æ¥")])),_:1}),v(u,{class:"links-container"},{default:d((()=>[s.value._raw.package.links.npm?(_(),r(u,{key:0,class:"link-item",onClick:t[0]||(t[0]=a=>L(s.value._raw.package.links.npm))},{default:d((()=>[v(i,{class:"link-icon"},{default:d((()=>[k("ğŸ“¦")])),_:1}),v(i,{class:"link-text"},{default:d((()=>[k("NPM")])),_:1}),v(i,{class:"link-url"},{default:d((()=>[k(g(s.value._raw.package.links.npm),1)])),_:1})])),_:1})):p("",!0),s.value._raw.package.links.homepage?(_(),r(u,{key:1,class:"link-item",onClick:t[1]||(t[1]=a=>L(s.value._raw.package.links.homepage))},{default:d((()=>[v(i,{class:"link-icon"},{default:d((()=>[k("ğŸ ")])),_:1}),v(i,{class:"link-text"},{default:d((()=>[k("ä¸»é¡µ")])),_:1}),v(i,{class:"link-url"},{default:d((()=>[k(g(s.value._raw.package.links.homepage),1)])),_:1})])),_:1})):p("",!0),s.value._raw.package.links.repository?(_(),r(u,{key:2,class:"link-item",onClick:t[2]||(t[2]=a=>L(s.value._raw.package.links.repository))},{default:d((()=>[v(i,{class:"link-icon"},{default:d((()=>[k("ğŸ’»")])),_:1}),v(i,{class:"link-text"},{default:d((()=>[k("ä»“åº“")])),_:1}),v(i,{class:"link-url"},{default:d((()=>[k(g(s.value._raw.package.links.repository),1)])),_:1})])),_:1})):p("",!0),s.value._raw.package.links.bugs?(_(),r(u,{key:3,class:"link-item",onClick:t[3]||(t[3]=a=>L(s.value._raw.package.links.bugs))},{default:d((()=>[v(i,{class:"link-icon"},{default:d((()=>[k("ğŸ›")])),_:1}),v(i,{class:"link-text"},{default:d((()=>[k("é—®é¢˜åé¦ˆ")])),_:1}),v(i,{class:"link-url"},{default:d((()=>[k(g(s.value._raw.package.links.bugs),1)])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})):p("",!0),v(u,{class:"section"},{default:d((()=>[v(u,{class:"section-title"},{default:d((()=>[k("â° æ—¶é—´ä¿¡æ¯")])),_:1}),v(u,{class:"info-grid"},{default:d((()=>[s.value.createdAt?(_(),r(u,{key:0,class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("åˆ›å»ºæ—¶é—´")])),_:1}),v(i,{class:"info-value"},{default:d((()=>[k(g(D(s.value.createdAt)),1)])),_:1})])),_:1})):p("",!0),s.value.updatedAt?(_(),r(u,{key:1,class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("æ›´æ–°æ—¶é—´")])),_:1}),v(i,{class:"info-value"},{default:d((()=>[k(g(D(s.value.updatedAt)),1)])),_:1})])),_:1})):p("",!0),s.value.license?(_(),r(u,{key:2,class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("å¼€æºåè®®")])),_:1}),v(i,{class:"info-value"},{default:d((()=>[k(g(s.value.license),1)])),_:1})])),_:1})):p("",!0),s.value.category?(_(),r(u,{key:3,class:"info-item"},{default:d((()=>[v(i,{class:"info-label"},{default:d((()=>[k("åˆ†ç±»")])),_:1}),v(i,{class:"info-value"},{default:d((()=>{return[k(g((a=s.value.category,{adapter:"é€‚é…å™¨",extension:"æ‰©å±•åŠŸèƒ½",tool:"å®ç”¨å·¥å…·",game:"å¨±ä¹ç©æ³•",image:"å›¾ç‰‡æœåŠ¡",manage:"ç®¡ç†å·¥å…·",general:"é€šç”¨åŠŸèƒ½",webui:"Webç•Œé¢",other:"å…¶ä»–"}[a]||a)),1)];var a})),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})]})),_:1})])),_:1}))])),_:1},8,["class"])}}},[["__scopeId","data-v-d41ca7ab"]]);export{M as default};
