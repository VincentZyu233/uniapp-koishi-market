import{K as a,L as e,M as l,O as s,r as t,m as i,A as u,B as n,c,a as r,w as d,n as o,q as f,h as _,o as v,b as g,d as k,t as p,e as m,f as b,g as h,F as w,x as y,N as x,i as C,j as F,S}from"./index-B6HRVVbH.js";import{R as N}from"./rich-text-parser.pj8wbb4V.js";import{s as z}from"./md5.1MjfM345.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const M=(s=>(t,i=l())=>{!a&&e(s,t,i)})(s),j=A({__name:"plugin-detail",setup(a){const e=t(!1),l=t(!0),s=t({}),A=t(!1),j=t(0);M((a=>{try{const t=i("theme");t&&(e.value="dark"===t),a.plugin?(s.value=JSON.parse(decodeURIComponent(a.plugin)),console.log("=== æ’ä»¶è¯¦æƒ…é¡µ - å½“å‰æ’ä»¶æ•°æ®ç»“æ„ ==="),console.log("æ’ä»¶åç§°:",s.value.shortname||s.value.name),console.log("å®Œæ•´æ•°æ®:",JSON.stringify(s.value,null,2)),console.log("======================================="),l.value=!1):(u({title:"æ’ä»¶æ•°æ®é”™è¯¯",icon:"error",duration:2e3}),setTimeout((()=>{n()}),2e3))}catch(t){console.error("åŠ è½½æ’ä»¶è¯¦æƒ…å¤±è´¥:",t),u({title:"åŠ è½½å¤±è´¥",icon:"error",duration:2e3}),setTimeout((()=>{n()}),2e3)}}));const q=()=>{n()},B=()=>{e.value=!e.value,y("theme",e.value?"dark":"light")},K=c((()=>{var a,e,l,t,i,u;if(A.value)return null;const n=s.value;if(null==(l=null==(e=null==(a=n._raw)?void 0:a.package)?void 0:e.publisher)?void 0:l.email)return n._raw.package.publisher.email;if((null==(u=null==(i=null==(t=n._raw)?void 0:t.package)?void 0:i.maintainers)?void 0:u.length)>0){const a=n._raw.package.maintainers[0].email;if(a)return a}return null})),O=a=>{if(!a)return"";return`https://www.gravatar.com/avatar/${z(a.toLowerCase().trim())}?d=identicon&s=96`},D=()=>{A.value=!0},J=a=>{(!a||a<0)&&(a=0),a>5&&(a=5);const e=Math.floor(a),l=a%1>=.5,s=5-Math.ceil(a);let t="â˜…".repeat(e);return l&&(t+="â˜†"),s>0&&(t+="â˜†".repeat(s)),t},L=a=>a?a>=1048576?(a/1048576).toFixed(1)+" MB":a>=1024?(a/1024).toFixed(1)+" KB":a+" B":"0 B",T=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),I=a=>{x({data:a,success:()=>{u({title:"é“¾æ¥å·²å¤åˆ¶",icon:"success",duration:1500})}})};return(a,t)=>{const i=C,u=_,n=F,c=S;return v(),r(u,{class:o(["plugin-detail-page",{"dark-mode":e.value}]),style:f({paddingTop:j.value+"px"})},{default:d((()=>[g(u,{class:"detail-header"},{default:d((()=>[g(u,{class:"back-btn",onClick:q},{default:d((()=>[g(i,{class:"back-icon"},{default:d((()=>[k("â†")])),_:1}),g(i,{class:"back-text"},{default:d((()=>[k("è¿”å›")])),_:1})])),_:1}),g(u,{class:"header-title"},{default:d((()=>[k("æ’ä»¶è¯¦æƒ…")])),_:1}),g(u,{class:"theme-toggle",onClick:B},{default:d((()=>[g(i,{class:"theme-icon"},{default:d((()=>[k(p(e.value?"â˜€ï¸":"ğŸŒ™"),1)])),_:1})])),_:1})])),_:1}),l.value?(v(),r(u,{key:0,class:"loading-container"},{default:d((()=>[g(u,{class:"loading-spinner"}),g(i,{class:"loading-text"},{default:d((()=>[k("åŠ è½½ä¸­...")])),_:1})])),_:1})):(v(),r(c,{key:1,class:"detail-content","scroll-y":""},{default:d((()=>[g(u,{class:"content-wrapper"},{default:d((()=>{var a,e,l,c,o,f,_,y,x,C,F,S;return[g(u,{class:"plugin-header"},{default:d((()=>[g(u,{class:"plugin-icon"},{default:d((()=>[K.value?(v(),r(n,{key:0,class:"author-avatar",src:O(K.value),mode:"aspectFill",onError:D},null,8,["src"])):(v(),r(u,{key:1,class:"icon-fallback"},{default:d((()=>[g(i,{class:"icon-text"},{default:d((()=>{return[k(p((a=s.value.category,{adapter:"ğŸ”Œ",extension:"ğŸ§©",tool:"ğŸ”§",game:"ğŸ®",image:"ğŸ–¼ï¸",manage:"âš™ï¸",general:"ğŸ“¦",webui:"ğŸŒ",other:"ğŸ“‹"}[a]||"ğŸ“¦")),1)];var a})),_:1})])),_:1}))])),_:1}),g(u,{class:"plugin-basic-info"},{default:d((()=>[g(u,{class:"plugin-name"},{default:d((()=>[k(p(s.value.shortname||s.value.name),1)])),_:1}),g(u,{class:"plugin-package"},{default:d((()=>{var a,e;return[k("@"+p((null==(e=null==(a=s.value._raw)?void 0:a.package)?void 0:e.name)||s.value.name),1)]})),_:1}),s.value.author?(v(),r(u,{key:0,class:"plugin-author"},{default:d((()=>[g(i,{class:"author-icon"},{default:d((()=>[k("ğŸ‘¤")])),_:1}),g(i,null,{default:d((()=>[k(p(s.value.author),1)])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1}),g(u,{class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ“ æè¿°")])),_:1}),g(u,{class:"section-content"},{default:d((()=>{var a,e,l;return[g(N,{class:"description-text",text:(l=s.value.description||(null==(e=null==(a=s.value._raw)?void 0:a.manifest)?void 0:e.description),"object"==typeof l?l["zh-CN"]||l.zh||l.en||JSON.stringify(l):l||"æš‚æ— æè¿°"),"parse-images":!0,"parse-links":!0},null,8,["text"])]})),_:1})])),_:1}),g(u,{class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ·ï¸ ç‰ˆæœ¬ä¿¡æ¯")])),_:1}),g(u,{class:"info-grid"},{default:d((()=>{var a,e;return[g(u,{class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("å½“å‰ç‰ˆæœ¬")])),_:1}),g(i,{class:"info-value"},{default:d((()=>[k(p(s.value.version||"N/A"),1)])),_:1})])),_:1}),(null==(e=null==(a=s.value.package)?void 0:a.peerDependencies)?void 0:e.koishi)?(v(),r(u,{key:0,class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("Koishi ç‰ˆæœ¬")])),_:1}),g(i,{class:"info-value"},{default:d((()=>[k(p(s.value.package.peerDependencies.koishi),1)])),_:1})])),_:1})):m("",!0)]})),_:1})])),_:1}),g(u,{class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ“Š ç»Ÿè®¡ä¿¡æ¯")])),_:1}),g(u,{class:"info-grid"},{default:d((()=>{var a;return[g(u,{class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("ä¸‹è½½é‡")])),_:1}),g(i,{class:"info-value"},{default:d((()=>{var a,e,l;return[k(p((l=s.value.downloads||(null==(e=null==(a=s.value._raw)?void 0:a.downloads)?void 0:e.lastMonth),l?l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toString():"0"))+"/æœˆ",1)]})),_:1})])),_:1}),g(u,{class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("è¯„åˆ†")])),_:1}),g(u,{class:"rating-value"},{default:d((()=>[g(i,{class:"stars"},{default:d((()=>[k(p(J(s.value.rating)),1)])),_:1}),g(i,{class:"rating-number"},{default:d((()=>{var a;return[k(p((null==(a=s.value.rating)?void 0:a.toFixed(1))||"0.0"),1)]})),_:1})])),_:1})])),_:1}),g(u,{class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("å®‰è£…å¤§å°")])),_:1}),g(i,{class:"info-value"},{default:d((()=>{var a;return[k(p(L(s.value.installSize||(null==(a=s.value._raw)?void 0:a.installSize))),1)]})),_:1})])),_:1}),g(u,{class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("å‘å¸ƒå¤§å°")])),_:1}),g(i,{class:"info-value"},{default:d((()=>{var a;return[k(p(L(s.value.publishSize||(null==(a=s.value._raw)?void 0:a.publishSize))),1)]})),_:1})])),_:1}),g(u,{class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("ä¾èµ–æ•°")])),_:1}),g(i,{class:"info-value"},{default:d((()=>{var a;return[k(p(s.value.dependents||(null==(a=s.value._raw)?void 0:a.dependents)||0),1)]})),_:1})])),_:1}),(null==(a=s.value._raw)?void 0:a.score)?(v(),r(u,{key:0,class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("è´¨é‡è¯„åˆ†")])),_:1}),g(i,{class:"info-value"},{default:d((()=>{var a;return[k(p((null==(a=s.value._raw.score.quality)?void 0:a.toFixed(1))||"N/A"),1)]})),_:1})])),_:1})):m("",!0)]})),_:1})])),_:1}),s.value.insecure||s.value.verified||s.value.portable?(v(),r(u,{key:0,class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ–ï¸ å¾½ç« ")])),_:1}),g(u,{class:"badges-container"},{default:d((()=>[s.value.verified?(v(),r(u,{key:0,class:"badge verified"},{default:d((()=>[g(i,{class:"badge-icon"},{default:d((()=>[k("âœ“")])),_:1}),g(i,{class:"badge-text"},{default:d((()=>[k("å®˜æ–¹è®¤è¯")])),_:1})])),_:1})):m("",!0),s.value.portable?(v(),r(u,{key:1,class:"badge portable"},{default:d((()=>[g(i,{class:"badge-icon"},{default:d((()=>[k("ğŸ“±")])),_:1}),g(i,{class:"badge-text"},{default:d((()=>[k("å¯ç§»æ¤")])),_:1})])),_:1})):m("",!0),s.value.insecure?(v(),r(u,{key:2,class:"badge insecure"},{default:d((()=>[g(i,{class:"badge-icon"},{default:d((()=>[k("âš ï¸")])),_:1}),g(i,{class:"badge-text"},{default:d((()=>[k("ä¸å®‰å…¨")])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})):m("",!0),(null==(e=null==(a=s.value._raw)?void 0:a.package)?void 0:e.publisher)?(v(),r(u,{key:1,class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ‘¤ å‘å¸ƒè€…")])),_:1}),g(u,{class:"publisher-card"},{default:d((()=>[g(n,{class:"publisher-avatar",src:O(s.value._raw.package.publisher.email),mode:"aspectFill"},null,8,["src"]),g(u,{class:"publisher-info"},{default:d((()=>[g(i,{class:"publisher-name"},{default:d((()=>[k(p(s.value._raw.package.publisher.username),1)])),_:1}),g(i,{class:"publisher-email"},{default:d((()=>[k(p(s.value._raw.package.publisher.email),1)])),_:1})])),_:1})])),_:1})])),_:1})):m("",!0),(null==(o=null==(c=null==(l=s.value._raw)?void 0:l.package)?void 0:c.maintainers)?void 0:o.length)?(v(),r(u,{key:2,class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ› ï¸ ç»´æŠ¤è€… ("+p(s.value._raw.package.maintainers.length)+")",1)])),_:1}),g(u,{class:"maintainers-list"},{default:d((()=>[(v(!0),b(w,null,h(s.value._raw.package.maintainers,((a,e)=>(v(),r(u,{class:"maintainer-card",key:e},{default:d((()=>[g(n,{class:"maintainer-avatar",src:O(a.email),mode:"aspectFill"},null,8,["src"]),g(u,{class:"maintainer-info"},{default:d((()=>[g(i,{class:"maintainer-name"},{default:d((()=>[k(p(a.username),1)])),_:2},1024),g(i,{class:"maintainer-email"},{default:d((()=>[k(p(a.email),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),(null==(_=null==(f=s.value._raw)?void 0:f.manifest)?void 0:_.service)?(v(),r(u,{key:3,class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("âš™ï¸ æœåŠ¡")])),_:1}),g(u,{class:"service-info"},{default:d((()=>{var a,e,l;return[(null==(a=s.value._raw.manifest.service.implements)?void 0:a.length)?(v(),r(u,{key:0,class:"service-item"},{default:d((()=>[g(i,{class:"service-label"},{default:d((()=>[k("å®ç°ï¼š")])),_:1}),g(u,{class:"service-tags"},{default:d((()=>[(v(!0),b(w,null,h(s.value._raw.manifest.service.implements,((a,e)=>(v(),r(i,{class:"service-tag",key:e},{default:d((()=>[k(p(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),(null==(e=s.value._raw.manifest.service.required)?void 0:e.length)?(v(),r(u,{key:1,class:"service-item"},{default:d((()=>[g(i,{class:"service-label"},{default:d((()=>[k("ä¾èµ–ï¼š")])),_:1}),g(u,{class:"service-tags"},{default:d((()=>[(v(!0),b(w,null,h(s.value._raw.manifest.service.required,((a,e)=>(v(),r(i,{class:"service-tag required",key:e},{default:d((()=>[k(p(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),(null==(l=s.value._raw.manifest.service.optional)?void 0:l.length)?(v(),r(u,{key:2,class:"service-item"},{default:d((()=>[g(i,{class:"service-label"},{default:d((()=>[k("å¯é€‰ï¼š")])),_:1}),g(u,{class:"service-tags"},{default:d((()=>[(v(!0),b(w,null,h(s.value._raw.manifest.service.optional,((a,e)=>(v(),r(i,{class:"service-tag optional",key:e},{default:d((()=>[k(p(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0)]})),_:1})])),_:1})):m("",!0),(null==(C=null==(x=null==(y=s.value._raw)?void 0:y.package)?void 0:x.keywords)?void 0:C.length)?(v(),r(u,{key:4,class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ”– å…³é”®è¯")])),_:1}),g(u,{class:"keywords-container"},{default:d((()=>[(v(!0),b(w,null,h(s.value._raw.package.keywords,((a,e)=>(v(),r(u,{class:"keyword-tag",key:e},{default:d((()=>[k(p(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),(null==(S=null==(F=s.value._raw)?void 0:F.package)?void 0:S.links)?(v(),r(u,{key:5,class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("ğŸ”— ç›¸å…³é“¾æ¥")])),_:1}),g(u,{class:"links-container"},{default:d((()=>[s.value._raw.package.links.npm?(v(),r(u,{key:0,class:"link-item",onClick:t[0]||(t[0]=a=>I(s.value._raw.package.links.npm))},{default:d((()=>[g(i,{class:"link-icon"},{default:d((()=>[k("ğŸ“¦")])),_:1}),g(i,{class:"link-text"},{default:d((()=>[k("NPM")])),_:1}),g(i,{class:"link-url"},{default:d((()=>[k(p(s.value._raw.package.links.npm),1)])),_:1})])),_:1})):m("",!0),s.value._raw.package.links.homepage?(v(),r(u,{key:1,class:"link-item",onClick:t[1]||(t[1]=a=>I(s.value._raw.package.links.homepage))},{default:d((()=>[g(i,{class:"link-icon"},{default:d((()=>[k("ğŸ ")])),_:1}),g(i,{class:"link-text"},{default:d((()=>[k("ä¸»é¡µ")])),_:1}),g(i,{class:"link-url"},{default:d((()=>[k(p(s.value._raw.package.links.homepage),1)])),_:1})])),_:1})):m("",!0),s.value._raw.package.links.repository?(v(),r(u,{key:2,class:"link-item",onClick:t[2]||(t[2]=a=>I(s.value._raw.package.links.repository))},{default:d((()=>[g(i,{class:"link-icon"},{default:d((()=>[k("ğŸ’»")])),_:1}),g(i,{class:"link-text"},{default:d((()=>[k("ä»“åº“")])),_:1}),g(i,{class:"link-url"},{default:d((()=>[k(p(s.value._raw.package.links.repository),1)])),_:1})])),_:1})):m("",!0),s.value._raw.package.links.bugs?(v(),r(u,{key:3,class:"link-item",onClick:t[3]||(t[3]=a=>I(s.value._raw.package.links.bugs))},{default:d((()=>[g(i,{class:"link-icon"},{default:d((()=>[k("ğŸ›")])),_:1}),g(i,{class:"link-text"},{default:d((()=>[k("é—®é¢˜åé¦ˆ")])),_:1}),g(i,{class:"link-url"},{default:d((()=>[k(p(s.value._raw.package.links.bugs),1)])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})):m("",!0),g(u,{class:"section"},{default:d((()=>[g(u,{class:"section-title"},{default:d((()=>[k("â° æ—¶é—´ä¿¡æ¯")])),_:1}),g(u,{class:"info-grid"},{default:d((()=>[s.value.createdAt?(v(),r(u,{key:0,class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("åˆ›å»ºæ—¶é—´")])),_:1}),g(i,{class:"info-value"},{default:d((()=>[k(p(T(s.value.createdAt)),1)])),_:1})])),_:1})):m("",!0),s.value.updatedAt?(v(),r(u,{key:1,class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("æ›´æ–°æ—¶é—´")])),_:1}),g(i,{class:"info-value"},{default:d((()=>[k(p(T(s.value.updatedAt)),1)])),_:1})])),_:1})):m("",!0),s.value.license?(v(),r(u,{key:2,class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("å¼€æºåè®®")])),_:1}),g(i,{class:"info-value"},{default:d((()=>[k(p(s.value.license),1)])),_:1})])),_:1})):m("",!0),s.value.category?(v(),r(u,{key:3,class:"info-item"},{default:d((()=>[g(i,{class:"info-label"},{default:d((()=>[k("åˆ†ç±»")])),_:1}),g(i,{class:"info-value"},{default:d((()=>{return[k(p((a=s.value.category,{adapter:"é€‚é…å™¨",extension:"æ‰©å±•åŠŸèƒ½",tool:"å®ç”¨å·¥å…·",game:"å¨±ä¹ç©æ³•",image:"å›¾ç‰‡æœåŠ¡",manage:"ç®¡ç†å·¥å…·",general:"é€šç”¨åŠŸèƒ½",webui:"Webç•Œé¢",other:"å…¶ä»–"}[a]||a)),1)];var a})),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})]})),_:1})])),_:1}))])),_:1},8,["class","style"])}}},[["__scopeId","data-v-49d5d058"]]);export{j as default};
