import{r as a,m as e,A as l,B as s,c as t,a as i,w as u,n,q as c,h as r,o,b as d,d as f,t as _,e as v,f as p,g as k,F as g,x as m,K as b,i as w,j as h,S as y}from"./index-C1kchmiI.js";import{o as x}from"./uni-app.es.COYp2IcK.js";import{R as C}from"./rich-text-parser.DRIGOfU0.js";import{s as F}from"./md5.1MjfM345.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=S({__name:"plugin-detail",setup(S){const j=a(!1),N=a(!0),z=a({}),A=a(!1),M=a(0);x((a=>{try{const t=e("theme");t&&(j.value="dark"===t),a.plugin?(z.value=JSON.parse(decodeURIComponent(a.plugin)),console.log("=== æ’ä»¶è¯¦æƒ…é¡µ - å½“å‰æ’ä»¶æ•°æ®ç»“æ„ ==="),console.log("æ’ä»¶åç§°:",z.value.shortname||z.value.name),console.log("å®Œæ•´æ•°æ®:",JSON.stringify(z.value,null,2)),console.log("======================================="),N.value=!1):(l({title:"æ’ä»¶æ•°æ®é”™è¯¯",icon:"error",duration:2e3}),setTimeout((()=>{s()}),2e3))}catch(t){console.error("åŠ è½½æ’ä»¶è¯¦æƒ…å¤±è´¥:",t),l({title:"åŠ è½½å¤±è´¥",icon:"error",duration:2e3}),setTimeout((()=>{s()}),2e3)}}));const q=()=>{s()},B=()=>{j.value=!j.value,m("theme",j.value?"dark":"light")},K=t((()=>{var a,e,l,s,t,i;if(A.value)return null;const u=z.value;if(null==(l=null==(e=null==(a=u._raw)?void 0:a.package)?void 0:e.publisher)?void 0:l.email)return u._raw.package.publisher.email;if((null==(i=null==(t=null==(s=u._raw)?void 0:s.package)?void 0:t.maintainers)?void 0:i.length)>0){const a=u._raw.package.maintainers[0].email;if(a)return a}return null})),D=a=>{if(!a)return"";return`https://www.gravatar.com/avatar/${F(a.toLowerCase().trim())}?d=identicon&s=96`},J=()=>{A.value=!0},O=a=>{(!a||a<0)&&(a=0),a>5&&(a=5);const e=Math.floor(a),l=a%1>=.5,s=5-Math.ceil(a);let t="â˜…".repeat(e);return l&&(t+="â˜†"),s>0&&(t+="â˜†".repeat(s)),t},T=a=>a?a>=1048576?(a/1048576).toFixed(1)+" MB":a>=1024?(a/1024).toFixed(1)+" KB":a+" B":"0 B",$=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),I=a=>{b({data:a,success:()=>{l({title:"é“¾æ¥å·²å¤åˆ¶",icon:"success",duration:1500})}})},L=()=>{var a,e;const l=(null==(e=null==(a=z.value._raw)?void 0:a.package)?void 0:e.name)||z.value.name;I(`https://www.npmjs.com/package/${l}`)},R=a=>{if(!a)return void l({title:"ç”¨æˆ·åä¸å­˜åœ¨",icon:"none",duration:1500});I(`https://www.npmjs.com/~${a}`)};return x((()=>{})),(a,e)=>{const l=w,s=r,t=h,m=y;return o(),i(s,{class:n(["plugin-detail-page",{"dark-mode":j.value}]),style:c({paddingTop:M.value+"px"})},{default:u((()=>[d(s,{class:"detail-header"},{default:u((()=>[d(s,{class:"back-btn",onClick:q},{default:u((()=>[d(l,{class:"back-icon"},{default:u((()=>[f("â†")])),_:1}),d(l,{class:"back-text"},{default:u((()=>[f("è¿”å›")])),_:1})])),_:1}),d(s,{class:"header-title"},{default:u((()=>[f("æ’ä»¶è¯¦æƒ…")])),_:1}),d(s,{class:"theme-toggle",onClick:B},{default:u((()=>[d(l,{class:"theme-icon"},{default:u((()=>[f(_(j.value?"â˜€ï¸":"ğŸŒ™"),1)])),_:1})])),_:1})])),_:1}),N.value?(o(),i(s,{key:0,class:"loading-container"},{default:u((()=>[d(s,{class:"loading-spinner"}),d(l,{class:"loading-text"},{default:u((()=>[f("åŠ è½½ä¸­...")])),_:1})])),_:1})):(o(),i(m,{key:1,class:"detail-content","scroll-y":""},{default:u((()=>[d(s,{class:"content-wrapper"},{default:u((()=>{var a,n,c,r,m,b,w,h,y,x,F,S;return[d(s,{class:"plugin-header"},{default:u((()=>[d(s,{class:"plugin-icon"},{default:u((()=>[K.value?(o(),i(t,{key:0,class:"author-avatar",src:D(K.value),mode:"aspectFill",onError:J},null,8,["src"])):(o(),i(s,{key:1,class:"icon-fallback"},{default:u((()=>[d(l,{class:"icon-text"},{default:u((()=>{return[f(_((a=z.value.category,{adapter:"ğŸ”Œ",extension:"ğŸ§©",tool:"ğŸ”§",game:"ğŸ®",image:"ğŸ–¼ï¸",manage:"âš™ï¸",general:"ğŸ“¦",webui:"ğŸŒ",other:"ğŸ“‹"}[a]||"ğŸ“¦")),1)];var a})),_:1})])),_:1}))])),_:1}),d(s,{class:"plugin-basic-info"},{default:u((()=>[d(s,{class:"plugin-name"},{default:u((()=>[f(_(z.value.shortname||z.value.name),1)])),_:1}),d(s,{class:"plugin-package clickable",onClick:L},{default:u((()=>[d(l,null,{default:u((()=>{var a,e;return[f("@"+_((null==(e=null==(a=z.value._raw)?void 0:a.package)?void 0:e.name)||z.value.name),1)]})),_:1}),d(l,{class:"copy-hint"},{default:u((()=>[f("ğŸ“‹")])),_:1})])),_:1}),z.value.author?(o(),i(s,{key:0,class:"plugin-author"},{default:u((()=>[d(l,{class:"author-icon"},{default:u((()=>[f("ğŸ‘¤")])),_:1}),d(l,null,{default:u((()=>[f(_(z.value.author),1)])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1}),d(s,{class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ“ æè¿°")])),_:1}),d(s,{class:"section-content"},{default:u((()=>{var a,e,l;return[d(C,{class:"description-text",text:(l=z.value.description||(null==(e=null==(a=z.value._raw)?void 0:a.manifest)?void 0:e.description),"object"==typeof l?l["zh-CN"]||l.zh||l.en||JSON.stringify(l):l||"æš‚æ— æè¿°"),"parse-images":!0,"parse-links":!0},null,8,["text"])]})),_:1})])),_:1}),d(s,{class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ·ï¸ ç‰ˆæœ¬ä¿¡æ¯")])),_:1}),d(s,{class:"info-grid"},{default:u((()=>{var a,e;return[d(s,{class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("å½“å‰ç‰ˆæœ¬")])),_:1}),d(l,{class:"info-value"},{default:u((()=>[f(_(z.value.version||"N/A"),1)])),_:1})])),_:1}),(null==(e=null==(a=z.value.package)?void 0:a.peerDependencies)?void 0:e.koishi)?(o(),i(s,{key:0,class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("Koishi ç‰ˆæœ¬")])),_:1}),d(l,{class:"info-value"},{default:u((()=>[f(_(z.value.package.peerDependencies.koishi),1)])),_:1})])),_:1})):v("",!0)]})),_:1})])),_:1}),d(s,{class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ“Š ç»Ÿè®¡ä¿¡æ¯")])),_:1}),d(s,{class:"info-grid"},{default:u((()=>{var a;return[d(s,{class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("ä¸‹è½½é‡")])),_:1}),d(l,{class:"info-value"},{default:u((()=>{var a,e,l;return[f(_((l=z.value.downloads||(null==(e=null==(a=z.value._raw)?void 0:a.downloads)?void 0:e.lastMonth),l?l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toString():"0"))+"/æœˆ",1)]})),_:1})])),_:1}),d(s,{class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("è¯„åˆ†")])),_:1}),d(s,{class:"rating-value"},{default:u((()=>[d(l,{class:"stars"},{default:u((()=>[f(_(O(z.value.rating)),1)])),_:1}),d(l,{class:"rating-number"},{default:u((()=>{var a;return[f(_((null==(a=z.value.rating)?void 0:a.toFixed(1))||"0.0"),1)]})),_:1})])),_:1})])),_:1}),d(s,{class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("å®‰è£…å¤§å°")])),_:1}),d(l,{class:"info-value"},{default:u((()=>{var a;return[f(_(T(z.value.installSize||(null==(a=z.value._raw)?void 0:a.installSize))),1)]})),_:1})])),_:1}),d(s,{class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("å‘å¸ƒå¤§å°")])),_:1}),d(l,{class:"info-value"},{default:u((()=>{var a;return[f(_(T(z.value.publishSize||(null==(a=z.value._raw)?void 0:a.publishSize))),1)]})),_:1})])),_:1}),d(s,{class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("ä¾èµ–æ•°")])),_:1}),d(l,{class:"info-value"},{default:u((()=>{var a;return[f(_(z.value.dependents||(null==(a=z.value._raw)?void 0:a.dependents)||0),1)]})),_:1})])),_:1}),(null==(a=z.value._raw)?void 0:a.score)?(o(),i(s,{key:0,class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("è´¨é‡è¯„åˆ†")])),_:1}),d(l,{class:"info-value"},{default:u((()=>{var a;return[f(_((null==(a=z.value._raw.score.quality)?void 0:a.toFixed(1))||"N/A"),1)]})),_:1})])),_:1})):v("",!0)]})),_:1})])),_:1}),z.value.insecure||z.value.verified||z.value.portable?(o(),i(s,{key:0,class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ–ï¸ å¾½ç« ")])),_:1}),d(s,{class:"badges-container"},{default:u((()=>[z.value.verified?(o(),i(s,{key:0,class:"badge verified"},{default:u((()=>[d(l,{class:"badge-icon"},{default:u((()=>[f("âœ“")])),_:1}),d(l,{class:"badge-text"},{default:u((()=>[f("å®˜æ–¹è®¤è¯")])),_:1})])),_:1})):v("",!0),z.value.portable?(o(),i(s,{key:1,class:"badge portable"},{default:u((()=>[d(l,{class:"badge-icon"},{default:u((()=>[f("ğŸ“±")])),_:1}),d(l,{class:"badge-text"},{default:u((()=>[f("å¯ç§»æ¤")])),_:1})])),_:1})):v("",!0),z.value.insecure?(o(),i(s,{key:2,class:"badge insecure"},{default:u((()=>[d(l,{class:"badge-icon"},{default:u((()=>[f("âš ï¸")])),_:1}),d(l,{class:"badge-text"},{default:u((()=>[f("ä¸å®‰å…¨")])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1})):v("",!0),(null==(n=null==(a=z.value._raw)?void 0:a.package)?void 0:n.publisher)?(o(),i(s,{key:1,class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ‘¤ å‘å¸ƒè€…")])),_:1}),d(s,{class:"publisher-card clickable",onClick:e[0]||(e[0]=a=>R(z.value._raw.package.publisher.username))},{default:u((()=>[d(t,{class:"publisher-avatar",src:D(z.value._raw.package.publisher.email),mode:"aspectFill"},null,8,["src"]),d(s,{class:"publisher-info"},{default:u((()=>[d(l,{class:"publisher-name"},{default:u((()=>[f(_(z.value._raw.package.publisher.username),1)])),_:1}),d(l,{class:"publisher-email"},{default:u((()=>[f(_(z.value._raw.package.publisher.email),1)])),_:1})])),_:1}),d(l,{class:"copy-hint"},{default:u((()=>[f("ğŸ“‹")])),_:1})])),_:1})])),_:1})):v("",!0),(null==(m=null==(r=null==(c=z.value._raw)?void 0:c.package)?void 0:r.maintainers)?void 0:m.length)?(o(),i(s,{key:2,class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ› ï¸ ç»´æŠ¤è€… ("+_(z.value._raw.package.maintainers.length)+")",1)])),_:1}),d(s,{class:"maintainers-list"},{default:u((()=>[(o(!0),p(g,null,k(z.value._raw.package.maintainers,((a,e)=>(o(),i(s,{class:"maintainer-card clickable",key:e,onClick:e=>R(a.username)},{default:u((()=>[d(t,{class:"maintainer-avatar",src:D(a.email),mode:"aspectFill"},null,8,["src"]),d(s,{class:"maintainer-info"},{default:u((()=>[d(l,{class:"maintainer-name"},{default:u((()=>[f(_(a.username),1)])),_:2},1024),d(l,{class:"maintainer-email"},{default:u((()=>[f(_(a.email),1)])),_:2},1024)])),_:2},1024),d(l,{class:"copy-hint"},{default:u((()=>[f("ğŸ“‹")])),_:1})])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):v("",!0),(null==(w=null==(b=z.value._raw)?void 0:b.manifest)?void 0:w.service)?(o(),i(s,{key:3,class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("âš™ï¸ æœåŠ¡")])),_:1}),d(s,{class:"service-info"},{default:u((()=>{var a,e,t;return[(null==(a=z.value._raw.manifest.service.implements)?void 0:a.length)?(o(),i(s,{key:0,class:"service-item"},{default:u((()=>[d(l,{class:"service-label"},{default:u((()=>[f("å®ç°ï¼š")])),_:1}),d(s,{class:"service-tags"},{default:u((()=>[(o(!0),p(g,null,k(z.value._raw.manifest.service.implements,((a,e)=>(o(),i(l,{class:"service-tag",key:e},{default:u((()=>[f(_(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):v("",!0),(null==(e=z.value._raw.manifest.service.required)?void 0:e.length)?(o(),i(s,{key:1,class:"service-item"},{default:u((()=>[d(l,{class:"service-label"},{default:u((()=>[f("ä¾èµ–ï¼š")])),_:1}),d(s,{class:"service-tags"},{default:u((()=>[(o(!0),p(g,null,k(z.value._raw.manifest.service.required,((a,e)=>(o(),i(l,{class:"service-tag required",key:e},{default:u((()=>[f(_(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):v("",!0),(null==(t=z.value._raw.manifest.service.optional)?void 0:t.length)?(o(),i(s,{key:2,class:"service-item"},{default:u((()=>[d(l,{class:"service-label"},{default:u((()=>[f("å¯é€‰ï¼š")])),_:1}),d(s,{class:"service-tags"},{default:u((()=>[(o(!0),p(g,null,k(z.value._raw.manifest.service.optional,((a,e)=>(o(),i(l,{class:"service-tag optional",key:e},{default:u((()=>[f(_(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):v("",!0)]})),_:1})])),_:1})):v("",!0),(null==(x=null==(y=null==(h=z.value._raw)?void 0:h.package)?void 0:y.keywords)?void 0:x.length)?(o(),i(s,{key:4,class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ”– å…³é”®è¯")])),_:1}),d(s,{class:"keywords-container"},{default:u((()=>[(o(!0),p(g,null,k(z.value._raw.package.keywords,((a,e)=>(o(),i(s,{class:"keyword-tag",key:e},{default:u((()=>[f(_(a),1)])),_:2},1024)))),128))])),_:1})])),_:1})):v("",!0),(null==(S=null==(F=z.value._raw)?void 0:F.package)?void 0:S.links)?(o(),i(s,{key:5,class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("ğŸ”— ç›¸å…³é“¾æ¥")])),_:1}),d(s,{class:"links-container"},{default:u((()=>[z.value._raw.package.links.npm?(o(),i(s,{key:0,class:"link-item",onClick:e[1]||(e[1]=a=>I(z.value._raw.package.links.npm))},{default:u((()=>[d(l,{class:"link-icon"},{default:u((()=>[f("ğŸ“¦")])),_:1}),d(l,{class:"link-text"},{default:u((()=>[f("NPM")])),_:1}),d(l,{class:"link-url"},{default:u((()=>[f(_(z.value._raw.package.links.npm),1)])),_:1})])),_:1})):v("",!0),z.value._raw.package.links.homepage?(o(),i(s,{key:1,class:"link-item",onClick:e[2]||(e[2]=a=>I(z.value._raw.package.links.homepage))},{default:u((()=>[d(l,{class:"link-icon"},{default:u((()=>[f("ğŸ ")])),_:1}),d(l,{class:"link-text"},{default:u((()=>[f("ä¸»é¡µ")])),_:1}),d(l,{class:"link-url"},{default:u((()=>[f(_(z.value._raw.package.links.homepage),1)])),_:1})])),_:1})):v("",!0),z.value._raw.package.links.repository?(o(),i(s,{key:2,class:"link-item",onClick:e[3]||(e[3]=a=>I(z.value._raw.package.links.repository))},{default:u((()=>[d(l,{class:"link-icon"},{default:u((()=>[f("ğŸ’»")])),_:1}),d(l,{class:"link-text"},{default:u((()=>[f("ä»“åº“")])),_:1}),d(l,{class:"link-url"},{default:u((()=>[f(_(z.value._raw.package.links.repository),1)])),_:1})])),_:1})):v("",!0),z.value._raw.package.links.bugs?(o(),i(s,{key:3,class:"link-item",onClick:e[4]||(e[4]=a=>I(z.value._raw.package.links.bugs))},{default:u((()=>[d(l,{class:"link-icon"},{default:u((()=>[f("ğŸ›")])),_:1}),d(l,{class:"link-text"},{default:u((()=>[f("é—®é¢˜åé¦ˆ")])),_:1}),d(l,{class:"link-url"},{default:u((()=>[f(_(z.value._raw.package.links.bugs),1)])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1})):v("",!0),d(s,{class:"section"},{default:u((()=>[d(s,{class:"section-title"},{default:u((()=>[f("â° æ—¶é—´ä¿¡æ¯")])),_:1}),d(s,{class:"info-grid"},{default:u((()=>[z.value.createdAt?(o(),i(s,{key:0,class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("åˆ›å»ºæ—¶é—´")])),_:1}),d(l,{class:"info-value"},{default:u((()=>[f(_($(z.value.createdAt)),1)])),_:1})])),_:1})):v("",!0),z.value.updatedAt?(o(),i(s,{key:1,class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("æ›´æ–°æ—¶é—´")])),_:1}),d(l,{class:"info-value"},{default:u((()=>[f(_($(z.value.updatedAt)),1)])),_:1})])),_:1})):v("",!0),z.value.license?(o(),i(s,{key:2,class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("å¼€æºåè®®")])),_:1}),d(l,{class:"info-value"},{default:u((()=>[f(_(z.value.license),1)])),_:1})])),_:1})):v("",!0),z.value.category?(o(),i(s,{key:3,class:"info-item"},{default:u((()=>[d(l,{class:"info-label"},{default:u((()=>[f("åˆ†ç±»")])),_:1}),d(l,{class:"info-value"},{default:u((()=>{return[f(_((a=z.value.category,{adapter:"é€‚é…å™¨",extension:"æ‰©å±•åŠŸèƒ½",tool:"å®ç”¨å·¥å…·",game:"å¨±ä¹ç©æ³•",image:"å›¾ç‰‡æœåŠ¡",manage:"ç®¡ç†å·¥å…·",general:"é€šç”¨åŠŸèƒ½",webui:"Webç•Œé¢",other:"å…¶ä»–"}[a]||a)),1)];var a})),_:1})])),_:1})):v("",!0)])),_:1})])),_:1})]})),_:1})])),_:1}))])),_:1},8,["class","style"])}}},[["__scopeId","data-v-beb7b7d8"]]);export{j as default};
